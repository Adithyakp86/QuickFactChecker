<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Quick Fact Checker with Modern UI/UX</title>
    <style>
        :root {
            --primary-color: #4f46e5;
            --primary-hover: #4338ca;
            --primary-light: #6366f1;
            --secondary-color: #7c3aed;
            --background-light: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 50%, #f3e8ff 100%);
            --background-dark: linear-gradient(135deg, #111827 0%, #1f2937 50%, #312e81 100%);
            --card-light: rgba(255, 255, 255, 0.8);
            --card-dark: rgba(31, 41, 55, 0.8);
            --text-primary-light: #1f2937;
            --text-primary-dark: #f3f4f6;
            --text-secondary-light: #6b7280;
            --text-secondary-dark: #9ca3af;
            --success: #059669;
            --success-light: #10b981;
            --success-bg-light: #ecfdf5;
            --success-bg-dark: rgba(5, 150, 105, 0.1);
            --error: #dc2626;
            --error-light: #ef4444;
            --error-bg-light: #fef2f2;
            --error-bg-dark: rgba(220, 38, 38, 0.1);
            --warning: #d97706;
            --warning-bg-light: #fef3c7;
            --warning-bg-dark: rgba(217, 119, 6, 0.1);
            --border-light: #e5e7eb;
            --border-dark: #374151;
            --shadow-light: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --shadow-dark: 0 20px 25px -5px rgba(0, 0, 0, 0.4), 0 10px 10px -5px rgba(0, 0, 0, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
                Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
            line-height: 1.6;
            min-height: 100vh;
            padding: 1rem;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            background: var(--background-light);
            color: var(--text-primary-light);
        }

        body.dark {
            background: var(--background-dark);
            color: var(--text-primary-dark);
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem 0;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
        }

        .theme-toggle {
            position: absolute;
            right: 0;
            top: 0;
            background: var(--card-light);
            border: none;
            color: var(--text-primary-light);
            cursor: pointer;
            padding: 0.75rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: var(--shadow-light);
            backdrop-filter: blur(10px);
            transform: scale(1);
        }

        body.dark .theme-toggle {
            background: var(--card-dark);
            color: var(--text-primary-dark);
            box-shadow: var(--shadow-dark);
        }

        .theme-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        .logo-container {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            color: white;
            box-shadow: var(--shadow-light);
            animation: float 3s ease-in-out infinite;
        }

        body.dark .logo-container {
            box-shadow: var(--shadow-dark);
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        h1 {
            font-size: clamp(2rem, 5vw, 3.5rem);
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: var(--text-secondary-light);
            font-size: 1.25rem;
            margin-bottom: 2rem;
        }

        body.dark .subtitle {
            color: var(--text-secondary-dark);
        }

        .main-card {
            background: var(--card-light);
            border-radius: 1.5rem;
            box-shadow: var(--shadow-light);
            padding: 2.5rem;
            margin-bottom: 2rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body.dark .main-card {
            background: var(--card-dark);
            box-shadow: var(--shadow-dark);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .form-group {
            margin-bottom: 2rem;
        }

        label {
            display: block;
            font-size: 0.875rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--text-primary-light);
        }

        body.dark label {
            color: var(--text-primary-dark);
        }

        .textarea-container {
            position: relative;
        }

        textarea {
            width: 100%;
            min-height: 120px;
            max-height: 400px;
            padding: 1rem;
            border: 2px solid var(--border-light);
            border-radius: 1rem;
            resize: none;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(255, 255, 255, 0.5);
            color: var(--text-primary-light);
            line-height: 1.5;
        }

        body.dark textarea {
            background: rgba(31, 41, 55, 0.5);
            color: var(--text-primary-dark);
            border-color: var(--border-dark);
        }

        textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.1);
            transform: translateY(-2px);
        }

        textarea::placeholder {
            color: var(--text-secondary-light);
        }

        body.dark textarea::placeholder {
            color: var(--text-secondary-dark);
        }

        .char-count {
            position: absolute;
            bottom: 0.75rem;
            right: 1rem;
            font-size: 0.75rem;
            color: var(--text-secondary-light);
            background: var(--card-light);
            padding: 0.25rem 0.5rem;
            border-radius: 0.5rem;
            backdrop-filter: blur(10px);
        }

        body.dark .char-count {
            color: var(--text-secondary-dark);
            background: var(--card-dark);
        }

        .sample-inputs {
            margin-bottom: 1.5rem;
        }

        .sample-inputs p {
            font-size: 0.875rem;
            font-weight: 500;
            margin-bottom: 0.75rem;
            color: var(--text-secondary-light);
        }

        body.dark .sample-inputs p {
            color: var(--text-secondary-dark);
        }

        .sample-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .sample-btn {
            background: rgba(79, 70, 229, 0.1);
            color: var(--primary-color);
            border: 1px solid rgba(79, 70, 229, 0.2);
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            transform: scale(1);
        }

        .sample-btn:hover {
            background: rgba(79, 70, 229, 0.2);
            transform: scale(1.05);
        }

        .btn-primary {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            color: white;
            border: none;
            border-radius: 1rem;
            font-size: 1.125rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            box-shadow: 0 10px 25px -5px rgba(79, 70, 229, 0.3);
            transform: scale(1);
        }

        .btn-primary:hover:not(:disabled) {
            transform: scale(1.02) translateY(-2px);
            box-shadow: 0 20px 40px -10px rgba(79, 70, 229, 0.4);
        }

        .btn-primary:active:not(:disabled) {
            transform: scale(0.98);
        }

        .btn-primary:disabled {
            background: linear-gradient(135deg, #9ca3af, #6b7280);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .loading-spinner {
            display: none;
            width: 24px;
            height: 24px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .prediction-result {
            margin-top: 2rem;
            padding: 1.5rem;
            border-radius: 1rem;
            display: none;
            align-items: flex-start;
            gap: 1rem;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            transform: translateY(20px);
            opacity: 0;
            border: 2px solid transparent;
        }

        .prediction-result.show {
            display: flex;
            transform: translateY(0);
            opacity: 1;
        }

        .prediction-result.success {
            background: var(--success-bg-light);
            color: var(--success);
            border-color: rgba(5, 150, 105, 0.3);
            box-shadow: 0 10px 25px -5px rgba(5, 150, 105, 0.2);
        }

        body.dark .prediction-result.success {
            background: var(--success-bg-dark);
            color: var(--success-light);
        }

        .prediction-result.error {
            background: var(--error-bg-light);
            color: var(--error);
            border-color: rgba(220, 38, 38, 0.3);
            box-shadow: 0 10px 25px -5px rgba(220, 38, 38, 0.2);
        }

        body.dark .prediction-result.error {
            background: var(--error-bg-dark);
            color: var(--error-light);
        }

        .prediction-result.warning {
            background: var(--warning-bg-light);
            color: var(--warning);
            border-color: rgba(217, 119, 6, 0.3);
            box-shadow: 0 10px 25px -5px rgba(217, 119, 6, 0.2);
        }

        body.dark .prediction-result.warning {
            background: var(--warning-bg-dark);
        }

        .result-icon {
            flex-shrink: 0;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: pulse 2s infinite;
        }

        .prediction-result.success .result-icon {
            background: rgba(5, 150, 105, 0.2);
        }

        .prediction-result.error .result-icon {
            background: rgba(220, 38, 38, 0.2);
        }

        .prediction-result.warning .result-icon {
            background: rgba(217, 119, 6, 0.2);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .result-content {
            flex: 1;
        }

        .result-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .confidence-bar {
            width: 100%;
            height: 8px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .confidence-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
            width: 0%;
        }

        .prediction-result.success .confidence-fill {
            background: linear-gradient(90deg, var(--success), var(--success-light));
        }

        .prediction-result.error .confidence-fill {
            background: linear-gradient(90deg, var(--error), var(--error-light));
        }

        .result-actions {
            display: flex;
            gap: 0.75rem;
            margin-top: 1rem;
        }

        .action-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: inherit;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .action-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }

        .history-card {
            background: var(--card-light);
            border-radius: 1.5rem;
            box-shadow: var(--shadow-light);
            padding: 2rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body.dark .history-card {
            background: var(--card-dark);
            box-shadow: var(--shadow-dark);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .history-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            cursor: pointer;
        }

        .history-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary-light);
        }

        body.dark .history-title {
            color: var(--text-primary-dark);
        }

        .history-toggle {
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .history-toggle.expanded {
            transform: rotate(180deg);
        }

        .history-items {
            display: none;
            space: 1rem 0;
        }

        .history-items.show {
            display: block;
            animation: slideDown 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .history-item {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 0.75rem;
            padding: 1rem;
            margin-bottom: 0.75rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        body.dark .history-item {
            background: rgba(31, 41, 55, 0.3);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .history-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .history-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .history-result {
            font-weight: 600;
            font-size: 0.875rem;
        }

        .history-result.true {
            color: var(--success);
        }

        .history-result.false {
            color: var(--error);
        }

        .history-date {
            font-size: 0.75rem;
            color: var(--text-secondary-light);
        }

        body.dark .history-date {
            color: var(--text-secondary-dark);
        }

        .history-text {
            font-size: 0.875rem;
            color: var(--text-secondary-light);
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        body.dark .history-text {
            color: var(--text-secondary-dark);
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem 0;
            }

            .main-card, .history-card {
                padding: 1.5rem;
                margin-bottom: 1.5rem;
            }

            .theme-toggle {
                position: relative;
                margin-bottom: 1rem;
            }

            .header {
                margin-bottom: 2rem;
            }

            h1 {
                font-size: 2.5rem;
            }

            .subtitle {
                font-size: 1rem;
            }

            .sample-buttons {
                justify-content: center;
            }

            .result-actions {
                flex-direction: column;
            }
        }

        .toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: var(--card-light);
            color: var(--text-primary-light);
            padding: 1rem 1.5rem;
            border-radius: 0.75rem;
            box-shadow: var(--shadow-light);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
        }

        body.dark .toast {
            background: var(--card-dark);
            color: var(--text-primary-dark);
            box-shadow: var(--shadow-dark);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="theme-icon">
                    <circle cx="12" cy="12" r="4"/>
                    <path d="M12 2v2"/>
                    <path d="M12 20v2"/>
                    <path d="m4.93 4.93 1.41 1.41"/>
                    <path d="m17.66 17.66 1.41 1.41"/>
                    <path d="M2 12h2"/>
                    <path d="M20 12h2"/>
                    <path d="m6.34 17.66-1.41 1.41"/>
                    <path d="m19.07 4.93-1.41 1.41"/>
                </svg>
            </button>
            
            <div class="logo-container">
                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                    <polyline points="14,2 14,8 20,8"/>
                    <line x1="16" y1="13" x2="8" y2="13"/>
                    <line x1="16" y1="17" x2="8" y2="17"/>
                    <polyline points="10,9 9,9 8,9"/>
                </svg>
            </div>
            
            <h1>Quick Fact Checker</h1>
            <p class="subtitle">Verify the authenticity of news articles and claims with AI-powered analysis</p>
        </div>

        <div class="main-card">
            <form id="prediction-form">
                <div class="form-group">
                    <label for="text-input">Enter text to analyze</label>
                    <div class="textarea-container">
                        <textarea 
                            id="text-input" 
                            name="text" 
                            placeholder="Paste your article, news story, or claim here for fact-checking..."
                            required
                        ></textarea>
                        <div class="char-count" id="char-count">0 characters</div>
                    </div>
                </div>

                <div class="sample-inputs">
                    <p>Try these examples:</p>
                    <div class="sample-buttons">
                        <button type="button" class="sample-btn" data-sample="Scientists have discovered a new planet that is completely made of diamonds and is only 10 light years away from Earth.">Example 1</button>
                        <button type="button" class="sample-btn" data-sample="A recent study published in Nature shows that drinking 8 glasses of water daily significantly improves cognitive function in adults.">Example 2</button>
                        <button type="button" class="sample-btn" data-sample="Local government announces new infrastructure project to improve city transportation with $50 million budget allocation.">Example 3</button>
                    </div>
                </div>

                <button type="submit" id="submit-btn" class="btn-primary">
                    <span class="btn-content">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="11" cy="11" r="8"/>
                            <path d="m21 21-4.35-4.35"/>
                        </svg>
                        Analyze Text
                    </span>
                    <span class="loading-spinner"></span>
                </button>
            </form>

            <div id="prediction-result" class="prediction-result">
                <div class="result-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="result-icon-svg">
                        <path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"/>
                        <path d="m9 12 2 2 4-4"/>
                    </svg>
                </div>
                <div class="result-content">
                    <div class="result-title" id="result-title">Analysis Result</div>
                    <div id="result-message">Processing your text...</div>
                    <div class="confidence-bar" id="confidence-bar" style="display: none;">
                        <div class="confidence-fill" id="confidence-fill"></div>
                    </div>
                    <div id="confidence-text" style="display: none;"></div>
                    <div class="result-actions">
                        <button class="action-btn" id="copy-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect width="14" height="14" x="8" y="8" rx="2" ry="2"/>
                                <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>
                            </svg>
                            Copy Result
                        </button>
                        <button class="action-btn" id="share-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/>
                                <polyline points="16,6 12,2 8,6"/>
                                <line x1="12" y1="2" x2="12" y2="15"/>
                            </svg>
                            Share
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="history-card" id="history-card" style="display: none;">
            <div class="history-header" id="history-header">
                <div class="history-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
                        <path d="M3 3v5h5"/>
                        <path d="M12 7v5l4 2"/>
                    </svg>
                    Recent Checks (<span id="history-count">0</span>)
                </div>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="history-toggle" id="history-toggle">
                    <polyline points="6,9 12,15 18,9"/>
                </svg>
            </div>
            <div class="history-items" id="history-items"></div>
        </div>
    </div>

    <div class="toast" id="toast"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elements
            const form = document.getElementById('prediction-form');
            const submitBtn = document.getElementById('submit-btn');
            const btnContent = submitBtn.querySelector('.btn-content');
            const loadingSpinner = submitBtn.querySelector('.loading-spinner');
            const predictionResult = document.getElementById('prediction-result');
            const themeToggle = document.getElementById('theme-toggle');
            const themeIcon = themeToggle.querySelector('.theme-icon');
            const textInput = document.getElementById('text-input');
            const charCount = document.getElementById('char-count');
            const sampleBtns = document.querySelectorAll('.sample-btn');
            const historyCard = document.getElementById('history-card');
            const historyHeader = document.getElementById('history-header');
            const historyItems = document.getElementById('history-items');
            const historyToggle = document.getElementById('history-toggle');
            const historyCount = document.getElementById('history-count');
            const copyBtn = document.getElementById('copy-btn');
            const shareBtn = document.getElementById('share-btn');
            const toast = document.getElementById('toast');

            // State
            let currentResult = null;
            let history = JSON.parse(localStorage.getItem('fact-check-history') || '[]');
            let historyExpanded = false;

            // Theme management
            const savedTheme = localStorage.getItem('theme') || 'light';
            if (savedTheme === 'dark') {
                document.body.classList.add('dark');
            }
            updateThemeIcon(savedTheme);

            function updateThemeIcon(theme) {
                if (theme === 'dark') {
                    themeIcon.innerHTML = `
                        <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/>
                    `;
                } else {
                    themeIcon.innerHTML = `
                        <circle cx="12" cy="12" r="4"/>
                        <path d="M12 2v2"/>
                        <path d="M12 20v2"/>
                        <path d="m4.93 4.93 1.41 1.41"/>
                        <path d="m17.66 17.66 1.41 1.41"/>
                        <path d="M2 12h2"/>
                        <path d="M20 12h2"/>
                        <path d="m6.34 17.66-1.41 1.41"/>
                        <path d="m19.07 4.93-1.41 1.41"/>
                    `;
                }
            }

            themeToggle.addEventListener('click', () => {
                const isDark = document.body.classList.toggle('dark');
                const newTheme = isDark ? 'dark' : 'light';
                localStorage.setItem('theme', newTheme);
                updateThemeIcon(newTheme);
            });

            // Auto-resize textarea
            function adjustTextareaHeight() {
                textInput.style.height = 'auto';
                textInput.style.height = Math.max(120, textInput.scrollHeight) + 'px';
            }

            // Character count
            function updateCharCount() {
                const count = textInput.value.length;
                charCount.textContent = `${count} character${count !== 1 ? 's' : ''}`;
            }

            textInput.addEventListener('input', () => {
                adjustTextareaHeight();
                updateCharCount();
            });

            // Sample inputs
            sampleBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    textInput.value = btn.dataset.sample;
                    adjustTextareaHeight();
                    updateCharCount();
                    textInput.focus();
                });
            });

            // Loading state
            function setLoading(isLoading) {
                submitBtn.disabled = isLoading;
                btnContent.style.display = isLoading ? 'none' : 'flex';
                loadingSpinner.style.display = isLoading ? 'block' : 'none';
            }

            // Show result
            function showResult(prediction, confidence = null, text = '') {
                currentResult = { prediction, confidence, text, timestamp: new Date() };
                
                const resultTitle = document.getElementById('result-title');
                const resultMessage = document.getElementById('result-message');
                const confidenceBar = document.getElementById('confidence-bar');
                const confidenceFill = document.getElementById('confidence-fill');
                const confidenceText = document.getElementById('confidence-text');
                const resultIconSvg = predictionResult.querySelector('.result-icon-svg');

                // Reset classes
                predictionResult.className = 'prediction-result';
                
                let message, className, iconSvg;
                
                if (prediction === 1) {
                    message = 'This text is likely TRUE';
                    className = 'success';
                    iconSvg = `
                        <path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"/>
                        <path d="m9 12 2 2 4-4"/>
                    `;
                } else if (prediction === 0) {
                    message = 'This text is likely FAKE';
                    className = 'error';
                    iconSvg = `
                        <path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                        <path d="M12 9v4"/>
                        <path d="M12 17h.01"/>
                    `;
                } else {
                    message = 'Error analyzing text. Please try again.';
                    className = 'warning';
                    iconSvg = `
                        <path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                        <path d="M12 9v4"/>
                        <path d="M12 17h.01"/>
                    `;
                }

                predictionResult.classList.add(className);
                resultTitle.textContent = message;
                resultMessage.textContent = `Analysis completed for: "${text.substring(0, 100)}${text.length > 100 ? '...' : ''}"`;
                resultIconSvg.innerHTML = iconSvg;

                if (confidence !== null && prediction !== -1) {
                    confidenceBar.style.display = 'block';
                    confidenceText.style.display = 'block';
                    confidenceText.textContent = `Confidence: ${Math.round(confidence * 100)}%`;
                    
                    setTimeout(() => {
                        confidenceFill.style.width = `${confidence * 100}%`;
                    }, 300);
                } else {
                    confidenceBar.style.display = 'none';
                    confidenceText.style.display = 'none';
                }

                // Show result with animation
                setTimeout(() => {
                    predictionResult.classList.add('show');
                    predictionResult.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                }, 100);

                // Add to history
                if (prediction !== -1) {
                    addToHistory(currentResult);
                }
            }

            // History management
            function addToHistory(result) {
                const historyItem = {
                    id: Date.now().toString(),
                    ...result
                };
                
                history.unshift(historyItem);
                history = history.slice(0, 5); // Keep only last 5
                localStorage.setItem('fact-check-history', JSON.stringify(history));
                updateHistoryDisplay();
            }

            function updateHistoryDisplay() {
                if (history.length === 0) {
                    historyCard.style.display = 'none';
                    return;
                }

                historyCard.style.display = 'block';
                historyCount.textContent = history.length;

                historyItems.innerHTML = history.map(item => {
                    const resultText = item.prediction === 1 ? 'TRUE' : 'FAKE';
                    const resultClass = item.prediction === 1 ? 'true' : 'false';
                    const confidenceText = item.confidence ? ` (${Math.round(item.confidence * 100)}%)` : '';
                    
                    return `
                        <div class="history-item">
                            <div class="history-item-header">
                                <span class="history-result ${resultClass}">
                                    ${item.prediction === 1 ? '✓' : '✗'} ${resultText}${confidenceText}
                                </span>
                                <span class="history-date">${item.timestamp.toLocaleDateString()}</span>
                            </div>
                            <div class="history-text">${item.text}</div>
                        </div>
                    `;
                }).join('');
            }

            historyHeader.addEventListener('click', () => {
                historyExpanded = !historyExpanded;
                historyToggle.classList.toggle('expanded', historyExpanded);
                
                if (historyExpanded) {
                    historyItems.classList.add('show');
                } else {
                    historyItems.classList.remove('show');
                }
            });

            // Copy and share functionality
            function showToast(message) {
                toast.textContent = message;
                toast.classList.add('show');
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 3000);
            }

            copyBtn.addEventListener('click', () => {
                if (!currentResult) return;
                
                const resultText = currentResult.prediction === 1 ? 'TRUE' : 'FAKE';
                const confidenceText = currentResult.confidence ? ` (${Math.round(currentResult.confidence * 100)}% confidence)` : '';
                const copyText = `Fact Check Result: ${resultText}${confidenceText}\n\nText analyzed: "${currentResult.text}"`;
                
                navigator.clipboard.writeText(copyText).then(() => {
                    showToast('Result copied to clipboard!');
                }).catch(() => {
                    showToast('Failed to copy result');
                });
            });

            shareBtn.addEventListener('click', async () => {
                if (!currentResult) return;
                
                const resultText = currentResult.prediction === 1 ? 'TRUE' : 'FAKE';
                const shareData = {
                    title: 'Fact Check Result',
                    text: `Quick Fact Checker result: ${resultText} - "${currentResult.text.substring(0, 100)}..."`,
                    url: window.location.href
                };

                if (navigator.share) {
                    try {
                        await navigator.share(shareData);
                        showToast('Result shared successfully!');
                    } catch (err) {
                        if (err.name !== 'AbortError') {
                            showToast('Failed to share result');
                        }
                    }
                } else {
                    navigator.clipboard.writeText(`${shareData.text}\n${shareData.url}`).then(() => {
                        showToast('Share link copied to clipboard!');
                    }).catch(() => {
                        showToast('Failed to copy share link');
                    });
                }
            });

            // Form submission
            form.addEventListener('submit', async function(event) {
                event.preventDefault();
                
                const text = textInput.value.trim();
                if (!text) return;

                setLoading(true);
                predictionResult.classList.remove('show');

                try {
                    // Simulate API call with realistic delay
                    await new Promise(resolve => setTimeout(resolve, 2000 + Math.random() * 1000));
                    
                    // Mock prediction with realistic confidence
                    const mockPrediction = Math.random() > 0.5 ? 1 : 0;
                    const mockConfidence = 0.65 + Math.random() * 0.3; // 65-95%
                    
                    showResult(mockPrediction, mockConfidence, text);
                } catch (error) {
                    console.error('Error:', error);
                    showResult(-1, null, text);
                } finally {
                    setLoading(false);
                }
            });

            // Initialize
            updateCharCount();
            updateHistoryDisplay();
        });
    </script>
</body>
</html>